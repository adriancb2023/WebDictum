import{s as c,j as e}from"./supabase.C18uiDbO.js";import{r as i}from"./index.DK-fsZOb.js";function _(){const[s,o]=i.useState(null),[d,a]=i.useState(!0),[t,p]=i.useState(!0),[n,x]=i.useState({totalUsers:0,activeSessions:0,lastLogin:null}),[m,u]=i.useState([]);i.useEffect(()=>{b(),g(),f();const r=localStorage.getItem("darkMode");r!==null&&p(JSON.parse(r))},[]),i.useEffect(()=>{localStorage.setItem("darkMode",JSON.stringify(t)),document.body.className=t?"dark-theme":"light-theme"},[t]);const b=async()=>{try{const{data:{user:r}}=await c.auth.getUser();if(!r){window.location.href="/login";return}o(r),h(r.id)}catch(r){console.error("Error checking user:",r),window.location.href="/login"}finally{a(!1)}},h=async r=>{await c.from("user_activity").insert([{user_id:r,activity_type:"dashboard_view",metadata:{page:"dashboard"}}])},g=async()=>{try{const l=await(await fetch("http://localhost:3000/api/total-users")).json(),N=await(await fetch("http://localhost:3000/api/active-sessions")).json();x(y=>({...y,totalUsers:l.total||0,activeSessions:N.activeSessions||0,lastLogin:new Date().toLocaleDateString("es-ES")}))}catch{x(l=>({...l,totalUsers:0,activeSessions:0}))}},f=async()=>{try{const l=await(await fetch("http://localhost:3000/api/recent-activity")).json();u(l.activities||[])}catch{u([])}},v=async()=>{try{await c.auth.signOut(),window.location.href="/"}catch(r){console.error("Error logging out:",r)}},j=()=>{p(!t)};return d?e.jsx("div",{className:`min-h-screen flex items-center justify-center ${t?"bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900":"bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50"}`,children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-4 border-transparent bg-gradient-to-r from-purple-500 via-pink-500 to-blue-500 bg-clip-border",children:e.jsx("div",{className:"absolute inset-2 rounded-full bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900"})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full animate-pulse"})})]})}):e.jsxs("div",{className:`min-h-screen transition-all duration-500 ${t?"bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 text-white":"bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 text-gray-900"}`,children:[e.jsxs("header",{className:`relative overflow-hidden ${t?"bg-black/20 backdrop-blur-md border-b border-purple-500/30":"bg-white/80 backdrop-blur-md border-b border-purple-200"}`,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600/20 via-pink-600/20 to-blue-600/20"}),e.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center py-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 via-pink-500 to-blue-500 rounded-xl flex items-center justify-center animate-pulse",children:e.jsx("i",{className:"fas fa-gavel text-white text-xl"})}),e.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-purple-500 via-pink-500 to-blue-500 rounded-xl blur opacity-30 animate-pulse"})]}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold gta-title ${t?"text-white":"text-gray-900"}`,children:"WebDictum"}),e.jsx("p",{className:`text-sm ${t?"text-purple-300":"text-purple-600"}`,children:"Panel de Control"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:j,className:`relative p-2 rounded-xl transition-all duration-300 ${t?"bg-purple-600/20 hover:bg-purple-600/30":"bg-purple-100 hover:bg-purple-200"}`,children:t?e.jsx("i",{className:"fas fa-sun text-yellow-400 text-lg"}):e.jsx("i",{className:"fas fa-moon text-purple-600 text-lg"})}),e.jsx("div",{className:`px-4 py-2 rounded-xl ${t?"bg-purple-600/20 border border-purple-500/30":"bg-white/50 border border-purple-200"}`,children:e.jsx("span",{className:`text-sm ${t?"text-purple-300":"text-purple-700"}`,children:s?.email})}),e.jsxs("button",{onClick:v,className:"relative px-6 py-2 bg-gradient-to-r from-red-500 to-pink-500 text-white rounded-xl font-medium hover:from-red-600 hover:to-pink-600 transition-all duration-300 transform hover:scale-105",children:[e.jsx("span",{className:"relative z-10",children:"Cerrar Sesión"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-500 to-pink-500 rounded-xl blur opacity-30"})]})]})]})})]}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 mb-8",children:[e.jsxs("div",{className:`relative group ${t?"bg-black/20 backdrop-blur-md border border-purple-500/30":"bg-white/80 backdrop-blur-md border border-purple-200"} rounded-2xl overflow-hidden transition-all duration-300 hover:transform hover:scale-105`,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/10 via-purple-500/10 to-pink-500/10"}),e.jsx("div",{className:"relative p-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-xl flex items-center justify-center",children:e.jsx("i",{className:"fas fa-users text-white text-lg"})}),e.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-blue-500 to-purple-500 rounded-xl blur opacity-30"})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${t?"text-purple-300":"text-purple-600"}`,children:"Total de Usuarios"}),e.jsx("p",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"}`,children:n.totalUsers.toLocaleString()})]})]})})})]}),e.jsxs("div",{className:`relative group ${t?"bg-black/20 backdrop-blur-md border border-purple-500/30":"bg-white/80 backdrop-blur-md border border-purple-200"} rounded-2xl overflow-hidden transition-all duration-300 hover:transform hover:scale-105`,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-500/10 via-emerald-500/10 to-teal-500/10"}),e.jsx("div",{className:"relative p-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-green-500 to-emerald-500 rounded-xl flex items-center justify-center",children:e.jsx("i",{className:"fas fa-signal text-white text-lg"})}),e.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-green-500 to-emerald-500 rounded-xl blur opacity-30"})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${t?"text-purple-300":"text-purple-600"}`,children:"Sesiones Activas"}),e.jsx("p",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"}`,children:n.activeSessions})]})]})})})]}),e.jsxs("div",{className:`relative group ${t?"bg-black/20 backdrop-blur-md border border-purple-500/30":"bg-white/80 backdrop-blur-md border border-purple-200"} rounded-2xl overflow-hidden transition-all duration-300 hover:transform hover:scale-105`,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/10 via-pink-500/10 to-red-500/10"}),e.jsx("div",{className:"relative p-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl flex items-center justify-center",children:e.jsx("i",{className:"fas fa-clock text-white text-lg"})}),e.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl blur opacity-30"})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${t?"text-purple-300":"text-purple-600"}`,children:"Último Acceso"}),e.jsx("p",{className:`text-lg font-bold ${t?"text-white":"text-gray-900"}`,children:n.lastLogin})]})]})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:`relative ${t?"bg-black/20 backdrop-blur-md border border-purple-500/30":"bg-white/80 backdrop-blur-md border border-purple-200"} rounded-2xl overflow-hidden`,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 via-purple-500/5 to-pink-500/5"}),e.jsxs("div",{className:"relative px-6 py-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"fas fa-chart-line text-white text-sm"})}),e.jsx("h3",{className:`text-xl font-bold gta-title ${t?"text-white":"text-gray-900"}`,children:"Actividad Reciente"})]}),e.jsxs("div",{className:"space-y-4",children:[m.length===0&&e.jsx("div",{className:"text-center text-gray-400",children:"Sin actividad reciente"}),m.map((r,l)=>e.jsxs("div",{className:`flex items-center space-x-4 p-3 rounded-xl ${r.activity_type==="login"?"bg-gradient-to-r from-green-500/10 to-emerald-500/10 border border-green-500/20":r.activity_type==="dashboard_view"?"bg-gradient-to-r from-blue-500/10 to-purple-500/10 border border-blue-500/20":"bg-gradient-to-r from-yellow-500/10 to-orange-500/10 border border-yellow-500/20"}`,children:[e.jsx("div",{className:`w-3 h-3 rounded-full animate-pulse ${r.activity_type==="login"?"bg-green-400":r.activity_type==="dashboard_view"?"bg-blue-400":"bg-yellow-400"}`}),e.jsxs("span",{className:`text-sm ${r.activity_type==="login"?t?"text-green-300":"text-green-700":r.activity_type==="dashboard_view"?t?"text-blue-300":"text-blue-700":t?"text-yellow-300":"text-yellow-700"}`,children:[r.activity_type==="login"&&"Nueva sesión iniciada",r.activity_type==="dashboard_view"&&"Entró al panel de control",r.activity_type==="profile_update"&&"Actualización de perfil"]}),e.jsx("span",{className:`text-xs ${t?"text-purple-400":"text-purple-600"}`,children:w(r.created_at)})]},r.id||l))]})]})]}),e.jsxs("div",{className:`relative ${t?"bg-black/20 backdrop-blur-md border border-purple-500/30":"bg-white/80 backdrop-blur-md border border-purple-200"} rounded-2xl overflow-hidden`,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/5 via-pink-500/5 to-red-500/5"}),e.jsxs("div",{className:"relative px-6 py-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"fas fa-bolt text-white text-sm"})}),e.jsx("h3",{className:`text-xl font-bold gta-title ${t?"text-white":"text-gray-900"}`,children:"Acciones Rápidas"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{className:"w-full relative px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-xl font-medium hover:from-blue-600 hover:to-purple-600 transition-all duration-300 transform hover:scale-105",children:[e.jsxs("span",{className:"relative z-10 flex items-center justify-center space-x-2",children:[e.jsx("i",{className:"fas fa-user-edit"}),e.jsx("span",{children:"Editar Perfil"})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500 to-purple-500 rounded-xl blur opacity-30"})]}),e.jsxs("button",{className:"w-full relative px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl font-medium hover:from-green-600 hover:to-emerald-600 transition-all duration-300 transform hover:scale-105",children:[e.jsxs("span",{className:"relative z-10 flex items-center justify-center space-x-2",children:[e.jsx("i",{className:"fas fa-plus-circle"}),e.jsx("span",{children:"Crear Nuevo Proyecto"})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500 to-emerald-500 rounded-xl blur opacity-30"})]}),e.jsxs("button",{className:"w-full relative px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl font-medium hover:from-purple-600 hover:to-pink-600 transition-all duration-300 transform hover:scale-105",children:[e.jsxs("span",{className:"relative z-10 flex items-center justify-center space-x-2",children:[e.jsx("i",{className:"fas fa-chart-bar"}),e.jsx("span",{children:"Ver Reportes"})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl blur opacity-30"})]})]})]})]})]}),e.jsxs("div",{className:`mt-8 relative ${t?"bg-black/20 backdrop-blur-md border border-purple-500/30":"bg-white/80 backdrop-blur-md border border-purple-200"} rounded-2xl overflow-hidden`,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-500/5 via-purple-500/5 to-pink-500/5"}),e.jsxs("div",{className:"relative px-6 py-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"fas fa-user-circle text-white text-sm"})}),e.jsx("h3",{className:`text-xl font-bold gta-title ${t?"text-white":"text-gray-900"}`,children:"Información del Usuario"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`p-4 rounded-xl ${t?"bg-black/30 border border-purple-500/20":"bg-white/50 border border-purple-200"}`,children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-purple-300":"text-purple-600"}`,children:"Email"}),e.jsx("p",{className:`text-sm ${t?"text-white":"text-gray-900"}`,children:s?.email})]}),e.jsxs("div",{className:`p-4 rounded-xl ${t?"bg-black/30 border border-purple-500/20":"bg-white/50 border border-purple-200"}`,children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-purple-300":"text-purple-600"}`,children:"ID de Usuario"}),e.jsx("p",{className:`text-sm ${t?"text-white":"text-gray-900"}`,children:s?.id})]}),e.jsxs("div",{className:`p-4 rounded-xl ${t?"bg-black/30 border border-purple-500/20":"bg-white/50 border border-purple-200"}`,children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-purple-300":"text-purple-600"}`,children:"Fecha de Creación"}),e.jsx("p",{className:`text-sm ${t?"text-white":"text-gray-900"}`,children:s?.created_at?new Date(s.created_at).toLocaleDateString("es-ES"):"N/A"})]}),e.jsxs("div",{className:`p-4 rounded-xl ${t?"bg-black/30 border border-purple-500/20":"bg-white/50 border border-purple-200"}`,children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-purple-300":"text-purple-600"}`,children:"Última Actualización"}),e.jsx("p",{className:`text-sm ${t?"text-white":"text-gray-900"}`,children:s?.updated_at?new Date(s.updated_at).toLocaleDateString("es-ES"):"N/A"})]})]})]})]})]}),e.jsx("style",{jsx:!0,children:`
        .gta-title {
          font-family: 'Righteous', cursive;
          text-transform: uppercase;
          letter-spacing: 0.1em;
          text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.5);
        }
        
        .dark-theme {
          background: #000000;
          color: #ffffff;
        }
        
        .light-theme {
          background: #ffffff;
          color: #000000;
        }
      `})]})}function w(s){const o=new Date,d=new Date(s),a=Math.floor((o-d)/1e3);return a<60?`hace ${a} segundos`:a<3600?`hace ${Math.floor(a/60)} minutos`:a<86400?`hace ${Math.floor(a/3600)} horas`:`hace ${Math.floor(a/86400)} días`}export{_ as default};
